<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  那天，面试官问了我这样一道题目：
  <!-- <script>
    function foo() {
      function bar() {
        console.log(this);
      }
      bar();
    }
    foo();
  </script> -->
  1. 全局环境中，this指向全局对象（window/globalThis）
  2. 在函数内部，this的值，取决于怎么调用该函数
  - 普通调用，指向undefined（混杂模式转为全局对象）
  <!-- <script>
    var o = {
      fn: function () {
        return this;
      }
    }
    var p = Object.create(o);
    console.log(p.fn() === p);
  </script> -->
  <script>
    class Car {
      constructor() {
        // Bind sayBye but not sayHi to show the difference
        // this.sayBye = this.sayBye.bind(this);
      }
      sayHi() {
        console.log(`Hello from ${this.name}`);
      }
      sayBye() {
        console.log(`Bye from ${this.name}`);
      }
      get name() {
        return 'Ferrari';
      }
    }

    class Bird {
      get name() {
        return 'Tweety';
      }
    }

    const car = new Car();
    const bird = new Bird();

    // The value of 'this' in methods depends on their caller
    car.sayHi(); // Hello from Ferrari
    bird.sayHi = car.sayHi;
    bird.sayHi(); // Hello from Tweety

    // For bound methods, 'this' doesn't depend on the caller
    bird.sayBye = car.sayBye;
    bird.sayBye();  // Bye from Ferrari
  </script>
</body>

</html>